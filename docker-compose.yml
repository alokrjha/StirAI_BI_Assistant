
# To run this:
# 1. Save this file as docker-compose.yml
# 2. Run `docker-compose up -d`
# 3. Access Superset at http://localhost:8088

version: "3.7"
services:
  superset:
    image: apache/superset:latest
    container_name: superset_app
    ports:
      - "8088:8088"
    environment:
      - SUPERSET_SECRET_KEY=your_secret_key_here
      - ADMIN_USERNAME=admin
      - ADMIN_PASSWORD=admin
    volumes:
      - ./superset_data:/app/superset_home
      - ./data:/data # Mount your Parquet files folder here
    entrypoint: >
      /bin/sh -c "
      pip install duckdb-engine &&
      /usr/bin/run-server.sh
      "

  dev:
    image: mcr.microsoft.com/devcontainers/typescript-node:20
    container_name: voice_bi_dev
    volumes:
      - .:/workspace:cached
    working_dir: /workspace
    # Overrides default command to keep container alive
    command: /bin/sh -c "while sleep 1000; do :; done"
    depends_on:
      - superset

# Instructions for Superset Database Connection:
# Database Name: DuckDB
# SQLAlchemy URI: duckdb:////data/my_database.duckdb
# (Or to read parquet directly in SQL): SELECT * FROM read_parquet('/data/*.parquet')
